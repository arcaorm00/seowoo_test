<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="AuthorityMapper">

	<select id="freeBoardGetList" resultType="authority" > <!-- resultType="ino.web.board.dto.BoardDto" -->
		 SELECT PAGE_BOARD.* FROM
			(
				SELECT ROW_NUMBER() OVER (ORDER BY NUM desc) rn,
				CASE CODE_TYPE WHEN '01' THEN '자유' WHEN '02' THEN '익명' WHEN '03' THEN 'QnA' END AS CODETYPE,
		 		NUM, NAME, TITLE, CONTENT, TO_CHAR(REGDATE , 'YYYY/MM/DD') AS REGDATE 
				FROM 
				FREEBOARD
				WHERE 1 = 1
				<if test="searchField != null and !searchField.equals('') and searchField.equals('DCOM001')">
					AND NUM = #{keyword}
				</if>
				<if test="searchField != null and !searchField.equals('') and searchField.equals('DCOM002')">
					AND TITLE like '%'||#{keyword}||'%'
				</if>
				<if test="startDate != ''">
					AND TO_CHAR(REGDATE , 'YYYY/MM/DD') BETWEEN #{startDate} and #{endDate}
				</if>
			) PAGE_BOARD
		WHERE rn BETWEEN #{start} and #{end}
	</select>


</mapper>